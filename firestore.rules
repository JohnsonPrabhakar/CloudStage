{
  "rules": {
    "artists": {
      ".read": true,
      "{artistId}": {
        // Allow artists to update their own profile
        ".write": "request.auth != null && request.auth.uid == artistId"
      }
    },
    "events": {
       // Allow anyone to read an event if it's approved
       ".read": "resource.data.moderationStatus == 'approved'",
      "{eventId}": {
        // Additionally, allow a logged-in user to read an event if they are the artist
        ".read": "resource.data.moderationStatus == 'approved' || (request.auth != null && request.auth.uid == resource.data.artistId)",
        // Allow an artist to create or update their own events
        ".write": "request.auth != null && (request.resource.data.artistId == request.auth.uid || resource.data.artistId == request.auth.uid)"
      }
    },
    "tickets": {
      // Allow logged-in users to read and write to their own tickets
      ".read": "request.auth != null && query.get('userId') == request.auth.uid",
      ".write": "request.auth != null && request.resource.data.userId == request.auth.uid"
    },
    "movies": {
      // Allow public read for movies
      ".read": true,
      // Only allow admin to write movies
      ".write": "request.auth != null && request.auth.token.email == 'admin@cloudstage.in'"
    },
    "config": {
       // Allow public read for site status
      ".read": true,
      // Only allow admin to write config
      ".write": "request.auth != null && request.auth.token.email == 'admin@cloudstage.in'"
    }
  }
}