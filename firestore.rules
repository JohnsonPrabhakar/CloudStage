{
  "rules": {
    "admins": {
      "$uid": {
        "allow read, write": "request.auth != null && get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true"
      }
    },
    "artists": {
      "$artistId": {
        "allow get": "true",
        "allow list": "request.auth != null && get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true",
        "allow create": "request.auth != null && request.auth.uid == $artistId",
        "allow update": "request.auth != null && (request.auth.uid == $artistId || get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true)",
        "allow delete": "request.auth != null && get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true"
      }
    },
    "events": {
      "$eventId": {
        "allow get": "resource.data.moderationStatus == 'approved' || (request.auth != null && (get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true || request.auth.uid == resource.data.artistId))",
        "allow list": "(request.query.where.moderationStatus is string && request.query.where.moderationStatus == 'approved') || (request.auth != null && get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true) || (request.auth != null && request.query.where.artistId is string && request.query.where.artistId == request.auth.uid)",
        "allow create": "request.auth != null && request.resource.data.artistId == request.auth.uid",
        "allow update": "request.auth != null && (request.auth.uid == resource.data.artistId || get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true)",
        "allow delete": "request.auth != null && get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true"
      }
    },
    "movies": {
      "$movieId": {
        "allow read": "true",
        "allow write": "request.auth != null && get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true"
      }
    },
    "tickets": {
      "$ticketId": {
        "allow create": "request.auth != null && request.resource.data.userId == request.auth.uid",
        "allow read": "request.auth != null && (request.auth.uid == resource.data.userId || get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true)",
        "allow list": "request.auth != null && ( (request.query.where.userId is string && request.query.where.userId == request.auth.uid) || get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true )"
      }
    },
    "config": {
      "$configId": {
        "allow read": "true",
        "allow write": "request.auth != null && get(/databases/(default)/documents/admins/$(request.auth.uid)).data.isAdmin == true"
      }
    }
  }
}
